#!/bin/bash

# {{ ansible_managed }}

CROWD_HOME="{{ crowd_home }}"
CROWD_CATALINA="{{ crowd_catalina }}"

JAVA_OPTS=" \
-Xms{{ crowd_jvm_minimum_memory }} \
-Xmx{{ crowd_jvm_maximum_memory }} \
{{ crowd_jvm_support_recommended_args }} \
-Dfile.encoding=UTF-8 \
"
export JAVA_OPTS

CATALINA_OPTS=" \
-Dcrowd.home={{ crowd_home }} \
-Dcatalina.connector.scheme={{ crowd_catalina_connector_scheme }} \
-Dcatalina.connector.secure={{ crowd_catalina_connector_secure }} \
-Dcatalina.connector.proxyName={{ crowd_catalina_connector_proxyname }} \
-Dcatalina.connector.proxyPort={{ crowd_catalina_connector_proxyport }} \
-Dcatalina.context.path={{ crowd_catalina_context_path }} \
"
export CATALINA_OPTS

# set the location of the pid file
if [ -z "$CATALINA_PID" ] ; then
    if [ -n "$CATALINA_BASE" ] ; then
        CATALINA_PID="$CATALINA_BASE"/work/catalina.pid
    elif [ -n "$CATALINA_HOME" ] ; then
        CATALINA_PID="$CATALINA_HOME"/work/catalina.pid
    fi
fi
export CATALINA_PID
